<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Autolayout Margin anchors vs Dimension anchors â€” Ashley Arthur</title>
	<meta name="description" content="Title: Autolayout Margin anchors vs Dimension anchors; Date: 2017-04-17; Author: Ashley Arthur">
	<meta name="author" content="Ashley Arthur">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://ashleyarthur.co.uk/theme/html5.js"></script>
		<![endif]-->
	<link href="http://ashleyarthur.co.uk/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="http://ashleyarthur.co.uk/theme/css/local.css" rel="stylesheet">
	<link href="http://ashleyarthur.co.uk/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="http://ashleyarthur.co.uk/">Ashley Arthur</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">Autolayout Margin anchors vs Dimension anchors</h1>
		<time datetime="2017-04-17T00:00:00+02:00" itemprop="datePublished">Mon 17 April 2017</time>
	</div>
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="http://ashleyarthur.co.uk/category/tech.html" rel="category">Tech</a>
		</span>
	</div>
 
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="http://ashleyarthur.co.uk/tag/swift.html" rel="tag">Swift</a>
		</span>
		<span itemprop="keywords">
			<a href="http://ashleyarthur.co.uk/tag/autolayout.html" rel="tag">AutoLayout</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><p>Recently I was testing my custom table cells with dynamic type sizes and even though I didn't have any text present I noticed sub views changing sizes - intrigued, I investigated.</p>
<p>My cell content was ridiculously simple, just one view that filled the whole parent content view, so what could be going wrong? It turns out it was auto layout related.
When Initially designing the layout I thought of two ways of creating the layout: match the height, width and centres of the parent view OR match horizontal and vertical anchors.</p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">constraints</span> <span class="p">=</span> <span class="p">[</span>
<span class="n">view</span><span class="p">.</span><span class="n">centerXAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">centerXAnchor</span><span class="p">),</span>
<span class="n">view</span><span class="p">.</span><span class="n">centerYAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">centerYAnchor</span><span class="p">),</span>
<span class="n">view</span><span class="p">.</span><span class="n">heightAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">heightAnchor</span><span class="p">)</span>
<span class="n">view</span><span class="p">.</span><span class="n">widthAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">widthAnchor</span><span class="p">)</span>
<span class="p">]</span>

<span class="kd">let</span> <span class="nv">altConstraints</span> <span class="p">=</span> <span class="p">[</span>
<span class="n">stackView</span><span class="p">.</span><span class="n">leadingAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
<span class="n">stackView</span><span class="p">.</span><span class="n">trailingAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span><span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">trailingAnchor</span><span class="p">),</span>
<span class="n">stackView</span><span class="p">.</span><span class="n">topAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">topAnchor</span><span class="p">),</span>
<span class="n">stackView</span><span class="p">.</span><span class="n">bottomAnchor</span><span class="p">.</span><span class="n">constraint</span><span class="p">(</span><span class="n">equalTo</span><span class="p">:</span> <span class="n">superview</span><span class="p">.</span><span class="n">layoutMarginsGuide</span><span class="p">.</span><span class="n">bottomAnchor</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>


<p>There is a difference though, and it's because I had opted to constrain anchors to the the margin guides. These are actually slightly offset from the edge by UIEdgeInsets and these change based on dynamic type sizes. I believe this is because table cells have the property
<code>self.contentView.preservesSuperviewLayoutMargins</code> which means table view margin changes are inherited by the cell.</p>
<p>Ultimately this was a case of view hierarchies and layout constraints can appear the same to the user but there can be subtle differences when interacting with other subsystems.</p>
<p>On a simpler level, don't overlook your layout margins! </p></div>
	<hr>
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://ashleyarthur.co.uk">Home</a></li>
							<li><a href="http://ashleyarthur.co.uk/archives.html"><i class="fa fa-Archives "></i>Archives</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://uk.linkedin.com/in/ashley-arthur-4a918635">Linkedin</a></li>
							<li><a href="https://github.com/ash30">Github</a></li>
							<li><a href="https://www.flickr.com/photos/ash30">Flickr</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Ashley Arthur 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>