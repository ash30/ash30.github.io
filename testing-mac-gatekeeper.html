<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Testing Mac Gatekeeper â€” Ashley Arthur</title>
	<meta name="description" content="Title: Testing Mac Gatekeeper; Date: 2015-04-29; Author: Ashley Arthur">
	<meta name="author" content="Ashley Arthur">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://ashleyarthur.co.uk/theme/html5.js"></script>
		<![endif]-->
	<link href="http://ashleyarthur.co.uk/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="http://ashleyarthur.co.uk/theme/css/local.css" rel="stylesheet">
	<link href="http://ashleyarthur.co.uk/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="http://ashleyarthur.co.uk/">Ashley Arthur</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">Testing Mac Gatekeeper</h1>
		<time datetime="2015-04-29T00:00:00+02:00" itemprop="datePublished">Wed 29 April 2015</time>
	</div>
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="http://ashleyarthur.co.uk/category/tech.html" rel="category">Tech</a>
		</span>
	</div>
 
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="http://ashleyarthur.co.uk/tag/testing.html" rel="tag">Testing</a>
		</span>
		<span itemprop="keywords">
			<a href="http://ashleyarthur.co.uk/tag/osx.html" rel="tag">OSX</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><p>Gatekeeper on macOS guards against the execution and installation of applications from unknown sources.
In order to pass this security check an application needs to be correctly signed which means its
a good requirement to check before a release.</p>
<p>The key gotcha to watch out for when testing is to ensure the executable has been quarantined.
By that I mean it has the ''com.apple.quarantine'' extended attribute present as Gatekeeper 
is triggered specifically at the first time you execute or install a quarantined file.</p>
<p>To verify the existence of the quarantine flag, you can show 'ls' output in terminal and look
for the '@' at the end of the permission fields. Better yet you can use the 'xattr' command to
show any extended attributes that exist on a file.</p>
<div class="highlight"><pre><span></span>$ xattr /path/to/file

com.apple.quarantine
</pre></div>


<p>A programatic method to verify if the application's signature will pass gate keeper is to run the 'spctl' command.</p>
<div class="highlight"><pre><span></span>spctl --assess --type install ./path/to/file
</pre></div>


<p>Spctl will exit zero on success or return one if anything failed.</p>
<p>Additionally you can check the actual signature use 'pkgutil' for futher details.</p>
<div class="highlight"><pre><span></span>pkgutil --check-signature ./path/to/file
</pre></div></div>
	<hr>
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://ashleyarthur.co.uk"> Home</a></li>
							<li><a href="http://ashleyarthur.co.uk/archives.html"><i class="fa fa-Archives "></i> Archives</a></li>
							<li><a href="http://ashleyarthur.co.uk/tags.html"><i class="fa fa-Tags "></i> Tags</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://uk.linkedin.com/in/ashley-arthur-4a918635">linkedin</a></li>
							<li><a href="https://github.com/ash30">github</a></li>
							<li><a href="https://www.flickr.com/photos/ash30">flickr</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://ashleyarthur.co.uk/category/tech.html">Tech (6)</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Ashley Arthur 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>